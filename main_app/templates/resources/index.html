{% extends 'base.html' %} {% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    <title>Place Autocomplete Address Form</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCPJpjD-qcR_yIxJnS8maR5W9KB0E3EzYI&callback=initAutocomplete&libraries=places&v=weekly"
      defer
    ></script>
    <script>
      "use strict";
      let placeSearch;
      let autocomplete;

      function initAutocomplete() {
        autocomplete = new google.maps.places.Autocomplete(
          document.getElementById("autocomplete"),
          {
            types: ["geocode"]
          }
        );
        autocomplete.setFields(["geometry"]);
        autocomplete.addListener("place_changed", fillInAddress);
      }

      function fillInAddress() {
        const place = autocomplete.getPlace();

        document.getElementById('latitude').innerHTML = place.geometry.location.lat();
        document.getElementById('longitude').innerHTML = place.geometry.location.lng();
      } 
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Resources</h1>
      {% for resource in resources %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">{{ resource.org_name }}</span>
            <br>
            <p>Resource: {{ resource.resource_name }}</p>
            <p>Category: {{ resource.category }}</p>
            <p>Hours: {{ resource.hours }}</p>
            <p>Street: {{ resource.street}}</p>
            <p>City: {{ resource.city}}</p>
            <p>State: {{ resource.state }}</p>
            <p>Phone: {{ resource.phone}}</p>
            <p>{{ resource.url }}</p>
          </div>
          </a>
        </div>
      {% endfor %}
    </div>
    <div id="locationField">
      <input
        id="autocomplete"
        placeholder="Enter your address"
        type="text"
      />
    </div>

    <table>
        <tr><td>latitude:</td><td id="latitude"></td></tr>
        <tr><td>longitude:</td><td id="longitude"></td></tr>
    </table>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtnS3D3bvBjvrLTLJJOv8xftB5Ctdgeck&callback=initMap&libraries=drawing&v=weekly
    "></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/style.css' %}"
    />
    <script src="{% static  'js/resources.js' %}"></script>
    <script src="{% static  'js/render_resources.js' %}"></script>

    <title>Drawing Tools</title>
    <link rel="stylesheet" type="text/css" href="markers.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtnS3D3bvBjvrLTLJJOv8xftB5Ctdgeck&callback=initMap&libraries=drawing&v=weekly"
      defer></script>
    <script src="resources.js"></script>
    <script src="markers.js"></script>

  <div id="map"></div>
    <div>
        <table id="resources">
        </table>
    </div>
  </div>
  {% endblock %}
</body>
</html>
